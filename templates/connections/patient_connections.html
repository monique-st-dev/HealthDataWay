{% extends 'includes/base.html' %}
{% block title %}My Connections{% endblock %}

{% block use_network %}
<canvas id="dna-left" class="dna-canvas left"></canvas>
{% endblock %}

{% block use_container %}
<section class="hero-section">
  <div class="container mt-6 text-white text-center hero-content">
    <h2 class="fancy-text mb-3">My Approved Doctor Connections</h2>

    {% include 'includes/messages.html' %}

    {% if connections %}
      <div class="row justify-content-center gx-5 gy-4">
        {% for link in connections %}
          <div class="col-12 col-md-10 col-lg-6 col-xl-5 d-flex justify-content-center">
            <div class="stat-box h-100 d-flex flex-column justify-content-between p-4">
              <div>
                <h5 class="dashboard-title text-center">Doctor Connection</h5>
                <p><strong>Doctor:</strong> {{ link.doctor.profile.full_name|default:link.doctor.email }}</p>
                <p><strong>Direction:</strong> {{ link.direction|capfirst }}</p>
              </div>
              <form method="post" action="{% url 'disconnect-doctor' link.pk %}" class="text-end mt-3">
                {% csrf_token %}
                <button type="submit" class="register-btn-glow btn px-4 py-2">Disconnect</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info mt-4">You have no active doctor connections yet.</div>
    {% endif %}
  </div>
</section>
{% endblock %}

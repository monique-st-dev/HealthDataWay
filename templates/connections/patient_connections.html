{% extends 'includes/base.html' %}
{% block title %}My Connections{% endblock %}

{% block content %}
<section class="hero-section">
  <canvas id="network-canvas"></canvas>

  <div class="container mt-5 text-white text-center hero-content">
    <h2 class="fancy-text mb-4">My Approved Doctor Connections</h2>

    {% if connections %}
      <ul class="list-group">
        {% for link in connections %}
          <li class="list-group-item bg-transparent text-white border-light d-flex justify-content-between align-items-center flex-column flex-md-row text-start">
            <div>
              <strong>Doctor:</strong> {{ link.doctor.profile.full_name|default:link.doctor.email }}<br>
              <strong>Direction:</strong> {{ link.direction|capfirst }}
            </div>
            <form method="post" action="{% url 'disconnect-doctor' link.pk %}" class="mt-2 mt-md-0">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-outline-danger">Disconnect</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="alert alert-info mt-4">You have no active doctor connections yet.</div>
    {% endif %}
  </div>
</section>
{% endblock %}

{% extends 'includes/base.html' %}
{% load static %}

{% block title %}Patient Data{% endblock %}

{% block use_network %}
<canvas id="network-canvas"></canvas>
{% endblock %}

{% block use_container %}
<main class="hero-section position-relative">
  <div class="container mt-5 text-white hero-content">
    <h2 class="fancy-text mb-2">Patient: {{ patient.profile.full_name|default:patient.email }}</h2>
    <p class="lead text-info mb-4">Specialty: {{ direction|capfirst }}</p>

    {% if direction == 'cardiology' %}
      <!-- Cardiology Records -->
      <div class="card glass-card mb-5 p-4">
        <h4 class="text-info">ü´Ä Cardiology Records</h4>
        {% if cardiology_records %}
          <div class="table-responsive mt-3">
            <table class="table table-bordered table-sm table-hover text-white">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Systolic</th>
                  <th>Diastolic</th>
                  <th>Pulse</th>
                </tr>
              </thead>
              <tbody>
                {% for record in cardiology_records %}
                  <tr>
                    <td>{{ record.created_at|date:"Y-m-d H:i" }}</td>
                    <td>{{ record.systolic|default:"‚Äì" }}</td>
                    <td>{{ record.diastolic|default:"‚Äì" }}</td>
                    <td>{{ record.pulse|default:"‚Äì" }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <p class="text-muted mt-2">No cardiology records available.</p>
        {% endif %}
      </div>
    {% elif direction == 'endocrinology' %}
      <!-- Endocrinology Records -->
      <div class="card glass-card mb-5 p-4">
        <h4 class="text-warning">üß™ Endocrinology Records</h4>
        {% if endocrinology_records %}
          <div class="table-responsive mt-3">
            <table class="table table-bordered table-sm table-hover text-white">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Blood Sugar (mmol/L)</th>
                </tr>
              </thead>
              <tbody>
                {% for record in endocrinology_records %}
                  <tr>
                    <td>{{ record.created_at|date:"Y-m-d H:i" }}</td>
                    <td>{{ record.blood_sugar|default:"‚Äì" }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <p class="text-muted mt-2">No endocrinology records available.</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="mt-4">
      <a href="{% url 'doctor-patient-report' patient.pk %}" class="btn btn-outline-warning">
        Generate Detailed Report
      </a>
    </div>

    <div class="mt-3">
      <a href="{% url 'doctor-patients-list' %}" class="btn btn-outline-light">
        ‚Üê Back to My Patients
      </a>
    </div>
  </div>
</main>
{% endblock %}

{% extends 'includes/base.html' %}
{% load static %}

{% block title %}Notifications{% endblock %}

{% block use_dna_left %}
<canvas id="dna-left" class="dna-canvas left"></canvas>
{% endblock %}

{% block use_container %}
<section class="hero-section position-relative">
  <div class="container page-container position-relative text-white text-center mt-2">
    <h2 class="fancy-text mb-3">Your Notifications</h2>

    {% include 'includes/messages.html' %}

    {% if notifications %}
      <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-9">

          <div class="table-responsive">
            <table class="table glass-table text-center align-middle">
              <thead>
                <tr class="table-header">
                  <th>Type</th>
                  <th>Message</th>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for notification in notifications %}
                  <tr class="{% if not notification.is_read %}table-warning text-dark{% else %}bg-transparent{% endif %}">
                    <td>{{ notification.get_notification_type_display }}</td>
                    <td class="text-start">{{ notification.message }}</td>
                    <td>{{ notification.created_at|date:"d.m.Y H:i" }}</td>
                    <td>
                      {% if notification.is_read %}
                        <span class="badge bg-success">Read</span>
                      {% else %}
                        <span class="badge bg-warning text-dark">Unread</span>
                      {% endif %}
                    </td>
                    <td>
                      <form method="post" action="{% url 'notification_delete' notification.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-outline-danger" title="Delete">
                          <i class="fas fa-trash"></i>
                        </button>
                      </form>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

        </div>
      </div>
    {% else %}
      <div class="alert alert-info mt-4">You have no notifications yet.</div>
    {% endif %}
  </div>
</section>
{% endblock %}
